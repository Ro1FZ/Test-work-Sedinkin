### Задание 1. Изменение пароля суперпользователя
1. Используя команду sudo, измените пароль суперпользователя (root). Напоминаем, что это плохая практика и задание носит учебный характер.
2. Убедитесь, что новый пароль работает при входе в систему.
### Задание 2. Настройка sudoers.
1. Создайте пользователей john, user1, user2.
2. Задайте пароли для пользователей user1, user2.
3. Создайте файл правил 01_usermanagement (с использованием `visudo`).
4. Добавьте пользователю john права использования `sudo` без ввода пароля для команд `groupadd` и `usermod`.
### Задание 3. Ограничение доступа к команде `su`
1. Переключитесь в пользователя john.
2. Создайте группу g_admin и добавьте в нее пользователей user1 и user2.
3. Отредактируйте файл `/etc/pam.d/su` и добавьте ограничение, чтобы только пользователи из группы «g_admin» могли использовать команду `su`.
4. Проверьте, что user1 и user2 могут использовать `su`, а пользователь john – не может.
### Задание 4. Использование модуля pam_tally для блокировки учетной записи
1. Настройте модуль pam_tally для отслеживания неудачных попыток входа в систему.
2. Установите правило блокировки учетной записи на 5 минут после 3 неудачных попыток входа.
3. Проверьте функциональность. Для этого введите неправильные учетные данные и убедитесь, что учетная запись блокируется.
**Замечания:**
- Перед внесением изменений в конфигурационные файлы, создайте резервные копии для предотвращения потенциальных проблем.
- Во время выполнения задач следите за журналами системы (`/var/log/auth.log` или `/var/log/secure`), чтобы отслеживать любые ошибки аутентификации или доступа.
1)
Изменили пароль root
![[Pasted image 20251005185008.png]]
2)
![[Pasted image 20251005185509.png]]
Создал пользователей(вылезла ошибка что группа user2 уже есть, решением стало удаление) , задал пароли для `user1` и `user2`,создал файл правил через `visudo`
![[Pasted image 20251005185323.png]]
3)
![[Pasted image 20251005190347.png]]
Переключился на пользователя `john`(вышла ошибка о том что неверный пароль, всё дело в том что это моя ошибка, я не задал пароль для пользователя)
![[Pasted image 20251005190842.png]]
Создал резервную копию PAM-конфигурации(снова вылезла ошибка пользователь `john` не имеет прав на выполнение команды `sudo cp`, потому что не разрешено использовать `sudo` для команды `cp` (или вообще не разрешено использовать `sudo`, кроме указанных команд) это связано с 2 задание, решением стало вернуться на основу и создать копию конфигурации. )
![[Pasted image 20251005191811.png]]
Отредактировал `/etc/pam.d/su`, нашёл строку (# auth required pam_wheel.so group=adm) и заменил на (auth required pam_wheel.so group=g_admin)
![[Pasted image 20251005192359.png]]
Проверил и всё работает как надо
4)
