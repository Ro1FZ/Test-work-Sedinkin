### Задание 1. Изменение пароля суперпользователя
1. Используя команду sudo, измените пароль суперпользователя (root). Напоминаем, что это плохая практика и задание носит учебный характер.
2. Убедитесь, что новый пароль работает при входе в систему.
### Задание 2. Настройка sudoers.
1. Создайте пользователей john, user1, user2.
2. Задайте пароли для пользователей user1, user2.
3. Создайте файл правил 01_usermanagement (с использованием `visudo`).
4. Добавьте пользователю john права использования `sudo` без ввода пароля для команд `groupadd` и `usermod`.
### Задание 3. Ограничение доступа к команде `su`
1. Переключитесь в пользователя john.
2. Создайте группу g_admin и добавьте в нее пользователей user1 и user2.
3. Отредактируйте файл `/etc/pam.d/su` и добавьте ограничение, чтобы только пользователи из группы «g_admin» могли использовать команду `su`.
4. Проверьте, что user1 и user2 могут использовать `su`, а пользователь john – не может.
### Задание 4. Использование модуля pam_tally для блокировки учетной записи
1. Настройте модуль pam_tally для отслеживания неудачных попыток входа в систему.
2. Установите правило блокировки учетной записи на 5 минут после 3 неудачных попыток входа.
3. Проверьте функциональность. Для этого введите неправильные учетные данные и убедитесь, что учетная запись блокируется.
**Замечания:**
- Перед внесением изменений в конфигурационные файлы, создайте резервные копии для предотвращения потенциальных проблем.
- Во время выполнения задач следите за журналами системы (`/var/log/auth.log` или `/var/log/secure`), чтобы отслеживать любые ошибки аутентификации или доступа.
1)
Изменили пароль root
![Image](<https://github.com/Ro1FZ/Test-work-Sedinkin/blob/main/Pasted%20image%2020251005183502.png?raw=true>)
2)
![Image](<https://github.com/Ro1FZ/Test-work-Sedinkin/blob/main/Pasted%20image%2020251005185008.png?raw=true>)
Создал пользователей(вылезла ошибка что группа user2 уже есть, решением стало удаление) , задал пароли для `user1` и `user2`,создал файл правил через `visudo`
![Image](<https://github.com/Ro1FZ/Test-work-Sedinkin/blob/main/Pasted%20image%2020251005185323.png?raw=true>)
3)
![Image](<https://github.com/Ro1FZ/Test-work-Sedinkin/blob/main/Pasted%20image%2020251005190347.png?raw=true>)
Переключился на пользователя `john`(вышла ошибка о том что неверный пароль, всё дело в том что это моя ошибка, я не задал пароль для пользователя)
![Image](<https://github.com/Ro1FZ/Test-work-Sedinkin/blob/main/Pasted%20image%2020251005190842.png?raw=true>)
Создал резервную копию PAM-конфигурации(снова вылезла ошибка пользователь `john` не имеет прав на выполнение команды `sudo cp`, потому что не разрешено использовать `sudo` для команды `cp` (или вообще не разрешено использовать `sudo`, кроме указанных команд) это связано с 2 задание, решением стало вернуться на основу и создать копию конфигурации. )
![Image](<https://github.com/Ro1FZ/Test-work-Sedinkin/blob/main/Pasted%20image%2020251005191811.png?raw=true>)
Отредактировал `/etc/pam.d/su`, нашёл строку (# auth required pam_wheel.so group=adm) и заменил на (auth required pam_wheel.so group=g_admin)
![Image](<https://github.com/Ro1FZ/Test-work-Sedinkin/blob/main/Pasted%20image%2020251005192359.png?raw=true>)
Проверил и всё работает как надо
4)
![Image](<https://github.com/Ro1FZ/Test-work-Sedinkin/blob/main/Pasted%20image%2020251005193843.png?raw=true>)
Отредактировал файл,после этого я не смог работать дальше тк при попытке подключения через виртуалку или ssh у меня всё время писало что неверный пароль(хотя он верный),я пробовал заходить через терминал в виртуальной машине, менял там пароль для пользователя (debian) ,писало что всё успешно(пароль изменён),но по факту пароль не менялся.
PS.(20:37 07.10.2025) Проблему почему у меня всё ломалось оказалась в том что account required pam_tally2.so полностью ломал мою систему, я узнал, возможно из-за того что я не установил нужный модуль для pam_tally2(так же я узнал что он устарел, не всегда установлен и может сломать систему,сейчас используется pam_faillock) у меня система не может его загрузить → `sudo` падает с ошибкой. Я зашёл в режим восстановления и закоментил команды и старый добрый debian ожил.
![Image](<https://github.com/Ro1FZ/Test-work-Sedinkin/blob/main/Pasted%20image%2020251007204829.png?raw=true>)
![Image](<https://github.com/Ro1FZ/Test-work-Sedinkin/blob/main/Pasted%20image%2020251007204944.png?raw=true>)
PS.(21:33) забудьте что я писал выше, снова та же ошибка ,та же проблема,итоговым решением стало настроить блокировку только для команды `su`, а не для SSH, локального входа и `sudo`.
![Image](<https://github.com/Ro1FZ/Test-work-Sedinkin/blob/main/Pasted%20image%2020251007213407.png?raw=true>)
В целом я считаю что это даже полезно было для меня тк я не особо владею linux и эти работы дают толчок к изучение нового.